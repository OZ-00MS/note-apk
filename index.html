<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Notes App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .note-content {
            min-height: 200px;
            resize: none;
        }
        .note-card {
            transition: all 0.3s ease;
        }
        .note-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        /* Animation for new notes */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .new-note {
            animation: fadeIn 0.3s ease-out;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-3xl font-bold text-gray-800">My Notes</h1>
                <div class="flex space-x-2">
                    <button id="newNoteBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                        </svg>
                        New Note
                    </button>
                    <button id="searchBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg transition">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                        Search
                    </button>
                </div>
            </div>

            <!-- Search input (hidden by default) -->
            <div id="searchContainer" class="hidden mb-6">
                <input type="text" id="searchInput" placeholder="Search notes..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>

            <!-- Create new note form (hidden by default) -->
            <div id="newNoteForm" class="hidden bg-white rounded-lg shadow-md p-6 mb-6">
                <input type="text" id="noteTitle" placeholder="Note title" class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <textarea id="noteContent" placeholder="Write your note here..." class="w-full px-4 py-2 border border-gray-300 rounded-lg note-content focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                <div class="flex justify-end mt-4">
                    <button id="cancelBtn" class="mr-2 px-4 py-2 text-gray-600 hover:text-gray-800 transition">Cancel</button>
                    <button id="saveBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition">Save Note</button>
                </div>
            </div>

            <!-- Notes display -->
            <div id="notesContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- Notes will be displayed here -->
            </div>

            <!-- Empty state -->
            <div id="emptyState" class="text-center py-10 hidden">
                <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/de9b1052-5fdc-4277-952b-a3719c89dfc3.png" alt="No notes yet illustration - clipboard with a pencil lying next to it on a desk" class="mx-auto mb-6 rounded-lg">
                <h2 class="text-2xl font-semibold text-gray-700 mb-2">No notes yet</h2>
                <p class="text-gray-500 mb-6">Start by creating your first note</p>
                <button id="emptyStateNewNoteBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition">
                    Create your first note
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const newNoteBtn = document.getElementById('newNoteBtn');
            const searchBtn = document.getElementById('searchBtn');
            const searchContainer = document.getElementById('searchContainer');
            const searchInput = document.getElementById('searchInput');
            const newNoteForm = document.getElementById('newNoteForm');
            const noteTitle = document.getElementById('noteTitle');
            const noteContent = document.getElementById('noteContent');
            const saveBtn = document.getElementById('saveBtn');
            const cancelBtn = document.getElementById('cancelBtn');
            const notesContainer = document.getElementById('notesContainer');
            const emptyState = document.getElementById('emptyState');
            const emptyStateNewNoteBtn = document.getElementById('emptyStateNewNoteBtn');

            // State
            let editingNoteId = null;
            let notes = JSON.parse(localStorage.getItem('notes')) || [];

            // Initialize the app
            renderNotes();
            updateEmptyState();

            // Event Listeners
            newNoteBtn.addEventListener('click', showNewNoteForm);
            emptyStateNewNoteBtn.addEventListener('click', showNewNoteForm);
            searchBtn.addEventListener('click', toggleSearch);
            saveBtn.addEventListener('click', saveNote);
            cancelBtn.addEventListener('click', hideNewNoteForm);
            searchInput.addEventListener('input', searchNotes);

            // Functions
            function showNewNoteForm() {
                editingNoteId = null;
                noteTitle.value = '';
                noteContent.value = '';
                newNoteForm.classList.remove('hidden');
                newNoteForm.scrollIntoView({ behavior: 'smooth' });
                noteTitle.focus();
            }

            function hideNewNoteForm() {
                newNoteForm.classList.add('hidden');
            }

            function toggleSearch() {
                searchContainer.classList.toggle('hidden');
                if (!searchContainer.classList.contains('hidden')) {
                    searchInput.focus();
                }
                searchInput.value = '';
                renderNotes();
            }

            function searchNotes() {
                const searchTerm = searchInput.value.toLowerCase();
                const filteredNotes = notes.filter(note => 
                    note.title.toLowerCase().includes(searchTerm) || 
                    note.content.toLowerCase().includes(searchTerm)
                );
                renderNotes(filteredNotes);
            }

            function saveNote() {
                const title = noteTitle.value.trim();
                const content = noteContent.value.trim();

                if (!title && !content) {
                    alert('Please add either a title or content for the note.');
                    return;
                }

                const now = new Date();
                const timestamp = now.toISOString();
                const formattedDate = formatDate(now);

                if (editingNoteId) {
                    // Update existing note
                    const noteIndex = notes.findIndex(note => note.id === editingNoteId);
                    if (noteIndex !== -1) {
                        notes[noteIndex] = {
                            ...notes[noteIndex],
                            title,
                            content,
                            updatedAt: timestamp
                        };
                    }
                } else {
                    // Create new note
                    const newNote = {
                        id: Date.now().toString(),
                        title,
                        content,
                        createdAt: timestamp,
                        updatedAt: timestamp,
                        color: getRandomColor()
                    };
                    notes.unshift(newNote);
                }

                localStorage.setItem('notes', JSON.stringify(notes));
                hideNewNoteForm();
                renderNotes();
            }

            function renderNotes(notesToRender = notes) {
                notesContainer.innerHTML = '';

                if (notesToRender.length === 0) {
                    updateEmptyState(true);
                    return;
                }

                updateEmptyState(false);

                notesToRender.forEach(note => {
                    const truncatedContent = note.content.length > 100 
                        ? note.content.substring(0, 100) + '...' 
                        : note.content;

                    const noteElement = document.createElement('div');
                    noteElement.className = `note-card bg-white rounded-lg shadow-md p-4 overflow-hidden relative ${note.color} new-note`;
                    noteElement.innerHTML = `
                        <div class="absolute top-2 right-2 flex space-x-1">
                            <button class="edit-btn p-1 text-gray-400 hover:text-blue-600 transition" data-id="${note.id}">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h Bold 5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                                </svg>
                            </button>
                            <button class="delete-btn p-1 text-gray-400 hover:text-red-600 transition" data-id="${note.id}">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                </svg>
                            </button>
                        </div>
                        <h3 class="text-lg font-semibold mb-2 truncate">${note.title || 'Untitled Note'}</h3>
                        <p class="text-gray-600 mb-4 whitespace-pre-line">${truncatedContent}</p>
                        <div class="text-xs text-gray-400 mt-4">Last edited: ${formatDate(new Date(note.updatedAt))}</div>
                    `;

                    notesContainer.appendChild(noteElement);
                });

                // Add event listeners to edit and delete buttons
                document.querySelectorAll('.edit-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        editNote(this.getAttribute('data-id'));
                    });
                });

                document.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        deleteNote(this.getAttribute('data-id'));
                    });
                });
            }

            function editNote(id) {
                const noteToEdit = notes.find(note => note.id === id);
                if (noteToEdit) {
                    editingNoteId = id;
                    noteTitle.value = noteToEdit.title || '';
                    noteContent.value = noteToEdit.content || '';
                    newNoteForm.classList.remove('hidden');
                    newNoteForm.scrollIntoView({ behavior: 'smooth' });
                    noteTitle.focus();
                }
            }

            function deleteNote(id) {
                if (confirm('Are you sure you want to delete this note?')) {
                    notes = notes.filter(note => note.id !== id);
                    localStorage.setItem('notes', JSON.stringify(notes));
                    renderNotes();
                    updateEmptyState();
                }
            }

            function updateEmptyState(show = notes.length === 0) {
                emptyState.classList.toggle('hidden', !show);
                if (show) {
                    notesContainer.classList.add('hidden');
                } else {
                    notesContainer.classList.remove('hidden');
                }
            }

            function formatDate(date) {
                return date.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }

            function getRandomColor() {
                const colors = [
                    'bg-blue-50 border-l-4 border-blue-500',
                    'bg-green-50 border-l-4 border-green-500',
                    'bg-purple-50 border-l-4 border-purple-500',
                    'bg-yellow-50 border-l-4 border-yellow-500',
                    'bg-pink-50 border-l-4 border-pink-500',
                    'bg-indigo-50 border-l-4 border-indigo-500'
                ];
                return colors[Math.floor(Math.random() * colors.length)];
            }
        });
    </script>
</body>
</html>
